var h=(t,n=[])=>{for(let e of n)typeof e=="string"&&(e=document.createTextNode(e)),t.appendChild(e)},m=(t,n)=>{let e=null;t instanceof Element?e=t:t=="fragment"?e=document.createDocumentFragment():e=document.createElement(t),e.v_listeners=[];let a=null;typeof n=="string"&&(n={textContent:n}),n instanceof Array&&(n={children:n});for(let r in n){let o=n[r];if(r==="parentElement")typeof o=="string"&&(o=document.querySelector(o)),a=o;else if(r==="defineProperties")Object.defineProperties(e,o);else if(r==="style"&&typeof o=="object")Object.assign(e.style,o);else if(r==="children")h(e,o);else if(r==="shadowChildren"){let l=e.attachShadow({mode:"open",delegatesFocus:n.delegatesFocus===!0});h(l,o)}else if(typeof o=="function"){let[l,...i]=r.split("."),s={};for(let f of i)s[f]=!0;e.addEventListener(l,o,s,i.includes("capture")),e.v_listeners.push({prop:r,listener:o})}else r in e?e[r]=o:e.setAttribute(r,o)}return e.v_destroy=()=>{if(e.v_listeners)for(let{prop:r,listener:o}of e.v_listeners){e.removeEventListener(r,o);for(let l of e.children)l.v_destroy&&l.v_destroy()}e.remove()},a&&a.appendChild(e),e},p=new Proxy(m,{get(t,n){return n==="textNode"?e=>document.createTextNode(e):m.bind(null,n)},apply(t,n,e){return t.apply(n,e)}});var E=(t,n="")=>{t.endsWith("/")&&(t=t.slice(0,-1)),n.endsWith("/")&&(n=n.slice(0,-1));let e=n.split("/"),a=t.split("/"),r={};if(e.length!=a.length)return{match:!1};for(let o=0;o<e.length;o++){let l=e[o],i=a[o];if(l.startsWith(":"))r[i.slice(1)]=i;else if(l!=i)return{match:!1}}return{match:!0,params:r}},x=async()=>{let t=window.location.pathname,n=Object.fromEntries(new URLSearchParams(window.location.search)),e=null,a=null;for(let r of u){r.default&&(e=r);let{match:o,params:l}=E(t,r.path);if(a={...n,...l},o){e=r;break}}if(e){let r={route:e,path:t,params:a,query:n};w&&await w(r),e.before&&await e.before(r);let{component:o,outlet:l}=e;l=l||c,typeof l=="string"&&(l=document.querySelector(l));let i=o(a);i instanceof Promise&&(i=await i),c.innerHTML="",i instanceof Element&&c.appendChild(i),e.after&&await e.after(r),y&&await y(r)}else console.warn('no matching route for "'+t+'"')},u=[],c=null,w=null,y=null;var d=(t,n)=>(n&&(t=t.replace(/:([^/]+)/g,(e,a)=>n[a])),t),g=t=>{typeof t=="string"&&(t={path:t});let{path:n,name:e,params:a,query:r,delta:o,replace:l}=t;if(o)return window.history.go(o);if(e){let s=u.find(f=>f.name===e);if(!s)throw new Error(`No route found with name ${e}`);n=d(s.path,a)}let i=n;return r&&(i+=new URLSearchParams(r).toString()),l?window.history.replaceState(null,"",i):window.history.pushState(null,"",i),x()};var v=()=>u;var S=t=>{if(t.name){let n=v();t.to=n.find(e=>e.name===t.name).path}return p("a",{...t,href:d(t.to,t.params),click(n){n.preventDefault(),t.click?.(n),g(t.to,t.params)}})};export{S as RouterLink};
