var d=(e,r="")=>{e.endsWith("/")&&(e=e.slice(0,-1)),r.endsWith("/")&&(r=r.slice(0,-1));let t=r.split("/"),l=e.split("/"),a={};if(t.length!=l.length)return{match:!1};for(let i=0;i<t.length;i++){let o=t[i],n=l[i];if(o.startsWith(":"))a[n.slice(1)]=n;else if(o!=n)return{match:!1}}return{match:!0,params:a}},c=async()=>{let e=window.location.pathname,r=Object.fromEntries(new URLSearchParams(window.location.search)),t=null,l=null;for(let a of s){a.default&&(t=a);let{match:i,params:o}=d(e,a.path);if(l={...r,...o},i){t=a;break}}if(t){let a={route:t,path:e,params:l,query:r};u&&await u(a),t.before&&await t.before(a);let{component:i,outlet:o}=t;o=o||f,typeof o=="string"&&(o=document.querySelector(o));let n=i(l);n instanceof Promise&&(n=await n),f.innerHTML="",n instanceof Element&&f.appendChild(n),t.after&&await t.after(a),h&&await h(a)}else console.warn('no matching route for "'+e+'"')},s=[],f=null,u=null,h=null,g=({routes:e,outlet:r,guards:t={}})=>(typeof r=="string"&&(r=document.querySelector(r)),f=r,s=e,u=t.beforeEach,h=t.afterEach,window.removeEventListener("popstate",c),window.addEventListener("popstate",c),c()),P=e=>{s=[...s,...e]},y=(e,r)=>(r&&(e=e.replace(/:([^/]+)/g,(t,l)=>r[l])),e),p=e=>{typeof e=="string"&&(e={path:e});let{path:r,name:t,params:l,query:a,delta:i,replace:o}=e;if(i)return window.history.go(i);if(t){let m=s.find(w=>w.name===t);if(!m)throw new Error(`No route found with name ${t}`);r=y(m.path,l)}let n=r;return a&&(n+=new URLSearchParams(a).toString()),o?window.history.replaceState(null,"",n):window.history.pushState(null,"",n),c()},E=(e=-1)=>p({delta:e}),R=(e=1)=>p({delta:e}),x=(...e)=>p({replace:!0,...e}),b=()=>s;export{P as addRoutes,E as back,R as forward,b as getRoutes,p as go,g as initializeRouter,y as insertParamsIntoPath,x as replace};
