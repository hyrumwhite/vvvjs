var d=(r,l=[])=>{for(let e of l)typeof e=="string"&&(e=document.createTextNode(e)),r.appendChild(e)},s=(r,l)=>{let e=null;r instanceof Element?e=r:r=="fragment"?e=document.createDocumentFragment():e=document.createElement(r),e.v_listeners=[];let i=null;typeof l=="string"&&(l={textContent:l}),l instanceof Array&&(l={children:l});for(let n in l){let t=l[n];if(n==="parentElement")typeof t=="string"&&(t=document.querySelector(t)),i=t;else if(n==="shadowHost")typeof t=="string"&&(t=document.querySelector(t)),i=t.attachShadow({mode:"open",delegatesFocus:t.getAttribute("delegates-focus")==="true"});else if(n==="defineProperties")Object.defineProperties(e,t);else if(n==="style"&&typeof t=="object")Object.assign(e.style,t);else if(n==="children")d(e,t);else if(n==="shadowChildren"){let o=e.attachShadow({mode:"open",delegatesFocus:l.delegatesFocus===!0});d(o,t)}else typeof t=="function"?(e.addEventListener(n,t),e.v_listeners.push({prop:n,listener:t})):n in e?e[n]=t:e.setAttribute(n,t)}return e.v_destroy=()=>{if(e.v_listeners)for(let{prop:n,listener:t}of e.v_listeners){e.removeEventListener(n,t);for(let o of e.children)o.v_destroy&&o.v_destroy()}e.remove()},i&&i.appendChild(e),e},f=new Proxy(s,{get(r,l){return l==="textNode"?e=>document.createTextNode(e):s.bind(null,l)},apply(r,l,e){return r.apply(l,e)}}),c=(r,l,{updateChild:e,createChild:i})=>{for(let n=0;n<l.length;n++){let t=l[n],o=r.children[n];o&&e?e(o,t,n):i&&(o=i(t,n),r.appendChild(o))}for(let n=r.children.length-1;n>=l.length;n--){let t=r.children[n];t.v_destroy?t.v_destroy():t.remove()}return r};export{s as createElement,f as default,c as updateList};
