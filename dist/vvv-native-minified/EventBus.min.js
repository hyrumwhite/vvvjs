var n={keyId:0,createEventKey(e){return`${e}-${this.keyId++}`},handlers:{},addEventListener(e,t,r={}){this.handlers[e]||(this.handlers[e]=[]);let s=t;return r.removeWhen&&(s=h=>(r.removeWhen(h)&&this.removeEventListener(e,s),t(h))),this.handlers[e].push(s),this.removeEventListener.bind(this,e,s)},removeEventListener(e,t){this.handlers[e]&&(this.handlers[e]=this.handlers[e].filter(r=>r!==t))},dispatchEvent(e,t){this.handlers[e]&&this.handlers[e].forEach(r=>r(t))}};export{n as eventBus};
